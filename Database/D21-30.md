# 21. Types of Joins

Joins are used to combine rows from multiple tables based on a related column.

Common Join Types

### ðŸ”¹ INNER JOIN

Returns only matching rows.

```
SELECT u.name, o.id
FROM users u
INNER JOIN orders o ON u.id = o.user_id;
```

âœ” Only users who placed orders

### ðŸ”¹ LEFT JOIN

Returns all rows from left table + matching from right.

```
SELECT u.name, o.id
FROM users u
LEFT JOIN orders o ON u.id = o.user_id;
```

âœ” Users without orders appear with NULL

### ðŸ”¹ RIGHT JOIN

Opposite of LEFT JOIN.

### ðŸ”¹ FULL JOIN

Returns all rows from both tables.

### ðŸ”¹ CROSS JOIN

Cartesian product.

```
SELECT * FROM users CROSS JOIN products;
```

# 22. What is a View?

A view is a virtual table created using a SQL query.

### Example

```
CREATE VIEW active_users AS
SELECT id, name FROM users WHERE status = 'active';
```

### Usage

```
SELECT * FROM active_users;
```

### Benefits

- Simplifies complex queries

- Improves security

- Reusable logic

# 23. What is a Stored Procedure?

A stored procedure is a precompiled SQL program stored in the database.

### Example

```
CREATE PROCEDURE getUser(IN uid INT)
BEGIN
  SELECT * FROM users WHERE id = uid;
END;
```

### Call

```
CALL getUser(1);
```

### Benefits

- Faster execution

- Reusability

- Reduced network calls

# 24. What is a Trigger?

A trigger automatically executes in response to database events.

### Events

- INSERT

- UPDATE

- DELETE

### Example

```
CREATE TRIGGER before_insert_user
BEFORE INSERT ON users
FOR EACH ROW
SET NEW.created_at = NOW();
```

### Use cases

- Audit logs

- Auto timestamps

- Data validation

# 25. What is a Subquery?

A subquery is a query nested inside another query.

### Example

```
SELECT name FROM users
WHERE id IN (
  SELECT user_id FROM orders
);
```

### Types

- Scalar

- Correlated

- Nested

# 26. UNION vs UNION ALL

Used to combine results of multiple queries.

### Example

```
SELECT name FROM customers
UNION
SELECT name FROM vendors;
```

### Difference

| UNION              | UNION ALL        |
| ------------------ | ---------------- |
| Removes duplicates | Keeps duplicates |
| Slower             | Faster           |

# 27. What is a Cursor?

A cursor allows row-by-row processing.

### Example

```
DECLARE cur CURSOR FOR SELECT id FROM users;
```

### Use case

- Complex row operations

- Legacy systems

âš  Generally avoided due to poor performance.

# 28. What is a Deadlock?

A deadlock occurs when two transactions wait for each other indefinitely.

### Example

```
T1 locks A â†’ waits for B
T2 locks B â†’ waits for A
```

### Prevention

- Consistent locking order

- Timeout detection

# 29. What is Database Sharding?

Sharding splits data across multiple databases.

### Example

```
Users 1â€“1M â†’ Shard 1
Users 1Mâ€“2M â†’ Shard 2
```

### Benefits

- Horizontal scalability

- Improved performance

# 30. What is Replication?

Replication copies data across multiple servers.

### Types

- Masterâ€“Slave

- Masterâ€“Master

### Benefits

- High availability

- Read scalability

- Disaster recovery
