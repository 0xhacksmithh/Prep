# 31. What is an Execution Plan?

An execution plan (or query plan) shows how the database engine executes a **SQL query**.

### Why it matters

- Identifies slow operations

- Helps optimize queries

- Shows index usage

### Example

```
EXPLAIN SELECT * FROM users WHERE email = 'a@mail.com';
```

### What it shows

- Index scan / table scan

- Join method

- Estimated cost & rows

✔ Interview tip: Always check execution plan for slow queries.

32. What is an Aggregate Function?

Aggregate functions operate on multiple rows and return a single value.

### Common aggregate functions

- COUNT()

- SUM()

- AVG()

- MIN()

- MAX()

### Example

```
SELECT COUNT(*) FROM orders;
SELECT AVG(salary) FROM employees;
```

### With GROUP BY

```
SELECT department, COUNT(*)
FROM employees
GROUP BY department;
```

# 33. Difference Between WHERE and HAVING

| WHERE                 | HAVING              |
| --------------------- | ------------------- |
| Filters rows          | Filters groups      |
| Used before GROUP BY  | Used after GROUP BY |
| Cannot use aggregates | Can use aggregates  |

### Example

```
SELECT department, COUNT(*)
FROM employees
WHERE salary > 50000
GROUP BY department
HAVING COUNT(*) > 5;
```

# 34. Index Scan vs Index Seek

### Index Seek

- Direct lookup

- Very fast

- Uses index efficiently

```
WHERE id = 10
```

### Index Scan

- Scans entire index

- Slower than seek

```
WHERE name LIKE '%abc%'
```

### Interview insight

Seek = targeted
Scan = sequential

# 35. What is Data Integrity?

Data integrity ensures accuracy, consistency, and reliability of data.

### Types

- Entity integrity → Primary key

- Referential integrity → Foreign key

- Domain integrity → Data type & constraints

### Example

```
FOREIGN KEY (user_id) REFERENCES users(id)
```

# 36. What is CAP Theorem?

In distributed systems, only **two out of three** can be guaranteed:

- Consistency

- Availability

- Partition Tolerance

### Example

- MongoDB → CP

- Cassandra → AP

✔ Partition tolerance is mandatory in distributed systems.

# 37. What is Eventual Consistency?

Data updates propagate over time, not instantly.

### Example

- Social media like counts

- Distributed caches

### Timeline

```
Write → Replica sync → Eventually consistent
```

# 38. SQL vs NoSQL Databases

| SQL              | NoSQL              |
| ---------------- | ------------------ |
| Schema-based     | Schema-less        |
| ACID             | BASE               |
| Vertical scaling | Horizontal scaling |
| MySQL            | MongoDB            |

### Use SQL when

- Complex joins

- Strong consistency

### Use NoSQL when

- Massive scale

- Flexible schema

# 39. What is BASE?

### BASE is an alternative to ACID for distributed systems.

- Basically Available

- Soft state

- Eventual consistency

### Example

- Cassandra

- DynamoDB

# 40. What is Optimistic Locking?

Optimistic locking assumes conflicts are rare.

### How it works

- Uses version number or timestamp

- Checks version before update

### Example

```
UPDATE product
SET price = 500, version = version + 1
WHERE id = 1 AND version = 3;
```

If no rows updated → conflict detected.
