# 41. What is libuv?

### Explanation

libuv is a C library used by Node.js to handle asynchronous, non-blocking operations.

It manages:

- Event loop

- Thread pool

- File system operations

- Networking

- DNS

ðŸ‘‰ JavaScript itself is single-threaded, but libuv enables concurrency.

### Example

When you do:

```
fs.readFile("file.txt", cb);
```

libuv executes it in the thread pool, not on the main thread.

# 42. Explain Event Loop Phases

### Explanation

The event loop executes callbacks in specific phases:

- Timers â€“ `setTimeout`, `setInterval`

- I/O callbacks

- Idle, prepare

- Poll â€“ retrieve new I/O events

- Check â€“ `setImmediate`

- Close callbacks

### Example

```
setTimeout(() => console.log("timeout"), 0);
setImmediate(() => console.log("immediate"));
```

### Interview Tip

`setImmediate()` usually executes before `setTimeout(0)`.

# 43. What are Timers in Node.js?

### Explanation

Timers schedule execution of code after a delay.

Types:

- setTimeout

- setInterval

- setImmediate

### Example

```
setTimeout(() => console.log("After 1s"), 1000);
```

# 44. Difference between setImmediate() and setTimeout()

### Explanation

| setImmediate        | setTimeout(0)       |
| ------------------- | ------------------- |
| Runs in check phase | Runs in timer phase |
| Faster after I/O    | Depends on timing   |

### Example

```
fs.readFile("file.txt", () => {
  setTimeout(() => console.log("timeout"), 0);
  setImmediate(() => console.log("immediate"));
});
```

### Output

```
immediate
timeout
```

# 45. What is process.nextTick()?

### Explanation

`process.nextTick()` schedules a callback to execute before the event loop continues.

It has higher priority than promises.

### Example

```
process.nextTick(() => console.log("nextTick"));
Promise.resolve().then(() => console.log("promise"));
```

### Output

```
nextTick
promise
```

### Interview Tip

Overusing `nextTick()` can starve the event loop.

# 46. What is Middleware Chaining in Express?

### Explanation

Middleware functions execute sequentially in the order they are defined.

### Example

```
app.use((req, res, next) => {
  console.log("First");
  next();
});

app.use((req, res, next) => {
  console.log("Second");
  next();
});
```

# 47. Difference between app.use() and app.get()

### Explanation

| app.use          | app.get       |
| ---------------- | ------------- |
| All HTTP methods | GET only      |
| Middleware       | Route handler |

### Example

```
app.use("/api", authMiddleware);
app.get("/api/users", handler);
```

# 48. What is CORS?

### Explanation

CORS (Cross-Origin Resource Sharing) controls which domains can access your API.

### Example

```
import cors from "cors";
app.use(cors({ origin: "https://example.com" }));
```

### Interview Tip

CORS is a browser security feature, not server security.

# 49. How Do You Handle Errors in Express?

### Explanation

Errors are handled using error-handling middleware.

### Example

```
app.use((err, req, res, next) => {
  res.status(500).json({ error: err.message });
});
```

**To forward error:**

```
next(new Error("Something broke"));
```

# 50. What is Centralized Error Handling?

### Explanation

Handling all errors in one `middleware` improves:

- Maintainability

- Debugging

- Logging

### Example

```
app.use((err, req, res, next) => {
  console.error(err);
  res.status(err.status || 500).json({
    success: false,
    message: err.message
  });
});
```

### Interview Tip

Always define error middleware last.
